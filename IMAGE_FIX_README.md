# Исправление проблем с изображениями на Vercel

## Проблема
При развертывании на Vercel возникали ошибки:
- `OpaqueResponseBlocking` для изображений с внешних серверов
- MIME-тип ошибки (`text/html` вместо `text/css` и `application/javascript`)
- Неправильная загрузка статических ресурсов

## Решение

### 1. Локальные SVG placeholder изображения
Созданы локальные SVG файлы в `public/images/`:
- `forest-landscape.svg` - для hero секции
- `team-forest.svg` - для секции о команде  
- `project-vologda.svg` - для проекта Вологда
- `project-karelia.svg` - для проекта Карелия
- `project-tver.svg` - для проекта Тверь
- `project-pskov.svg` - для проекта Псков

### 2. API роут для прокси изображений
Создан `app/api/proxy-image/route.ts` для загрузки внешних изображений через сервер.

### 3. Маппинг изображений
Файл `lib/images.ts` содержит маппинг внешних URL на локальные изображения.

### 4. Улучшенный компонент ImageWithFallback
Обновлен компонент `components/figma/ImageWithFallback.tsx` с:
- Поддержкой локальных изображений
- Fallback на прокси API
- Красивыми placeholder'ами
- Правильной обработкой ошибок

### 5. Конфигурация Next.js
Обновлен `next.config.js` с правильными заголовками для изображений и API.

## Использование

### Быстрое исправление
```bash
fix-images-vercel.bat
```

### Диагностика проблем
```bash
diagnose-images.bat
```

### Тест локальных изображений
```bash
test-images.bat
```

## Файлы изменены
- `components/figma/ImageWithFallback.tsx` - обновлен компонент
- `lib/images.ts` - создан файл маппинга
- `app/api/proxy-image/route.ts` - создан API роут
- `next.config.js` - добавлены заголовки
- `vercel.json` - упрощена конфигурация
- `public/images/*.svg` - добавлены локальные изображения

## Преимущества решения
1. ✅ Быстрая загрузка - локальные SVG изображения
2. ✅ Fallback система - прокси API для внешних изображений  
3. ✅ SEO-оптимизация - правильные alt теги
4. ✅ Совместимость с Vercel - нет проблем с CORS
5. ✅ Масштабируемость - легко добавлять новые изображения

## Дальнейшие улучшения
- Добавить WebP версии изображений
- Оптимизировать размеры SVG файлов
- Добавить lazy loading для изображений
- Создать автоматический генератор placeholder'ов

## Мониторинг
После развертывания проверьте:
1. Консоль браузера на отсутствие ошибок
2. Время загрузки изображений
3. Корректность отображения на мобильных устройствах
