@echo off
echo üîÑ –°–õ–ò–Ø–ù–ò–ï –í –ì–õ–ê–í–ù–£–Æ –í–ï–¢–ö–£
echo ==========================

echo.
echo üìã –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–π –≤–µ—Ç–∫–∏
echo --------------------------------
for /f "tokens=*" %%i in ('git branch --show-current') do set CURRENT_BRANCH=%%i
echo üåø –¢–µ–∫—É—â–∞—è –≤–µ—Ç–∫–∞: %CURRENT_BRANCH%

if "%CURRENT_BRANCH%"=="main" (
    echo ‚ö†Ô∏è  –í—ã —É–∂–µ –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –≤–µ—Ç–∫–µ main
    echo –ù–µ—á–µ–≥–æ —Å–ª–∏–≤–∞—Ç—å
    pause
    exit /b 0
)

echo.
echo üìã –®–∞–≥ 2: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–ª–∏—è–Ω–∏—è
echo -------------------------------
echo ‚ùì –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–ª–∏—Ç—å –≤–µ—Ç–∫—É "%CURRENT_BRANCH%" –≤ main?
echo    - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –¥–µ–ø–ª–æ–π –Ω–∞ Vercel –ø—Ä–æ—à–µ–ª —É—Å–ø–µ—à–Ω–æ
echo    - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
echo    - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –Ω–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
echo.
set /p CONFIRM="–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å? (y/N): "
if /i not "%CONFIRM%"=="y" (
    echo ‚ùå –°–ª–∏—è–Ω–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ
    pause
    exit /b 0
)

echo.
echo üìã –®–∞–≥ 3: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ main
echo ------------------------------
git checkout main
if %errorlevel% neq 0 (
    echo ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –Ω–∞ main
    pause
    exit /b 1
)
echo ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–∏–ª–∏—Å—å –Ω–∞ main

echo.
echo üìã –®–∞–≥ 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ main
echo -------------------------
git pull origin main
if %errorlevel% neq 0 (
    echo ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ main
    pause
    exit /b 1
)
echo ‚úÖ Main –æ–±–Ω–æ–≤–ª–µ–Ω

echo.
echo üìã –®–∞–≥ 5: –°–ª–∏—è–Ω–∏–µ –≤–µ—Ç–∫–∏
echo -----------------------
git merge %CURRENT_BRANCH%
if %errorlevel% neq 0 (
    echo ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–ª–∏—è–Ω–∏–∏
    echo –í–æ–∑–º–æ–∂–Ω–æ –µ—Å—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã. –†–µ—à–∏—Ç–µ –∏—Ö –≤—Ä—É—á–Ω—É—é
    pause
    exit /b 1
)
echo ‚úÖ –í–µ—Ç–∫–∞ %CURRENT_BRANCH% —Å–ª–∏—Ç–∞ –≤ main

echo.
echo üìã –®–∞–≥ 6: –ü—É—à main –Ω–∞ GitHub
echo ----------------------------
git push origin main
if %errorlevel% neq 0 (
    echo ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—É—à–µ main
    pause
    exit /b 1
)
echo ‚úÖ Main –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ GitHub

echo.
echo üìã –®–∞–≥ 7: –£–¥–∞–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –≤–µ—Ç–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
echo ------------------------------------------------
set /p DELETE_BRANCH="–£–¥–∞–ª–∏—Ç—å –≤–µ—Ç–∫—É %CURRENT_BRANCH%? (y/N): "
if /i "%DELETE_BRANCH%"=="y" (
    git branch -d %CURRENT_BRANCH%
    git push origin --delete %CURRENT_BRANCH%
    echo ‚úÖ –í–µ—Ç–∫–∞ %CURRENT_BRANCH% —É–¥–∞–ª–µ–Ω–∞
) else (
    echo ‚ö†Ô∏è  –í–µ—Ç–∫–∞ %CURRENT_BRANCH% —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
)

echo.
echo üéâ –°–õ–ò–Ø–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û!
echo =====================
echo.
echo ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:
echo    - –í–µ—Ç–∫–∞ %CURRENT_BRANCH% —Å–ª–∏—Ç–∞ –≤ main
echo    - Main –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ GitHub
echo    - Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –¥–µ–ø–ª–æ–π
echo.
echo üîç –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ:
echo    1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ https://vercel.com/dashboard
echo    2. –î–æ–∂–¥–∞—Ç—å—Å—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è —Å main
echo    3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–¥–∞–∫—à–µ–Ω —Å–∞–π—Ç
echo.
echo üìã –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
echo    - –°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
echo    - –°—Ç–∏–ª–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
echo    - –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ Console
echo    - –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
echo.
echo üéØ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –î–µ–ø–ª–æ–π —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω!
echo.

pause
